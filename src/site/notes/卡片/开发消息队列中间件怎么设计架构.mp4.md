---
{"dg-publish":true,"permalink":"/卡片/开发消息队列中间件怎么设计架构.mp4/","dgPassFrontmatter":true}
---

[开发消息队列中间件怎么设计架构.mp4](file:///Z:%5C我的阅读黑曜石Vault%5C资产库藏%5C互联网Java工程师面试突击训练系列课程%5C第一季%5C11_如果让你来开发一个消息队列中间件，你会怎么设计架构？%5C视频.mp4)
* [[Logseq元问题库/pages/？ 消息队列 架构设计\|？ 消息队列 架构设计]]
	* [[Logseq元问题库/pages/？ 消息队列 非功能设计\|？ 消息队列 非功能设计]]
		* [[Logseq元问题库/pages/？ 消息队列 扩展性 设计\|？ 消息队列 扩展性 设计]]
			* 即可伸缩性的设计，就是需要的时候快速扩容，就可以增加吞吐量和容量，那怎么搞？设计个分布式的系统呗，参照一下kafka的设计理念，broker -> topic -> partition，每个partition放一个机器，就存一部分数据。如果现在资源不够了，简单啊，给topic增加partition，然后做数据迁移，增加机器，不就可以存放更多数据，提供更高的吞吐量了
		* [[Logseq元问题库/pages/？ 消息队列 持久化 设计\|？ 消息队列 持久化 设计]]
			* 得考虑一下这个mq的数据要不要落地磁盘吧？那肯定要了，落磁盘，才能保证别进程挂了数据就丢了。那落磁盘的时候怎么落啊？顺序写，这样就没有磁盘随机读写的寻址开销，磁盘顺序读写的性能是很高的，这就是kafka的思路
		* [[Logseq元问题库/pages/？ 消息队列 高可用 设计\|？ 消息队列 高可用 设计]]
			* 多副本 -> leader & follower -> broker挂了重新选举leader即可对外服务。
		* [[Logseq元问题库/pages/？ 消息队列 消息可靠性 设计\|？ 消息队列 消息可靠性 设计]]